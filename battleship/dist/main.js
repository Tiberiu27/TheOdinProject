(()=>{var e={475:(e,t,n)=>{const{Game:r}=n(403),o=(()=>{const e=()=>{const e=document.getElementsByTagName("nav")[0];e.innerHTML="";const t=document.createElement("h1");t.textContent=(r.player.hasTurn?"Your":"Enemy")+" turn",e.appendChild(t)},t=(t,o,a)=>{const s=document.createElement("div");s.setAttribute("id",o);const i=document.createElement("h1");i.textContent=a;const c=document.createElement("div");c.setAttribute("id","left-container"===o?"left-board":"right-board"),t.spaces.forEach((o=>{let a=document.createElement("div");a.setAttribute("id",`${o.coord}`),a.classList.add("spaces"),a.addEventListener("click",(o=>{t.recieveAttack(o.target.id),a.style.background="red",r.switchTurns(),e(),(r.playerBoard.fleetDrown||r.compBoard.fleetDrown)&&n()})),o.hasShip&&t===r.playerBoard&&(a.style.background="blue"),c.appendChild(a)})),s.appendChild(i),s.appendChild(c),document.getElementById("main-container").appendChild(s)},n=()=>{const e=document.getElementById("main-container");e.innerHTML="",e.style.justifyContent="center",e.style.alignItems="center";const t=document.createElement("h2");t.style.fontSize="50px",t.textContent=`Game Over! ${r.compBoard.fleetDrown?"You":"Your enemy has "} won!`,e.appendChild(t)};return{loadNav:e,loadMainContainer:()=>{document.getElementById("main-container"),t(r.playerBoard,"left-container","Your board"),t(r.compBoard,"right-container","Enemy's board")}}})();e.exports={DOMloader:o}},403:(e,t,n)=>{const{Player:r}=n(62),{Gameboard:o}=n(325),a=(()=>{const e=o(),t=o();s(e,3),s(e,5),s(e,7),s(t,3),s(t,5),s(t,7);const n=r(t),a=r(e);function s(e,t){let n=Math.floor(10*Math.random())+1,r=`${Math.floor(10*Math.random())+1}:${n}`;n+t>10&&s(e,t);try{e.placeShip(r,t)}catch(n){s(e,t)}}return a.isComputer=!0,n.hasTurn=!0,{player:n,comp:a,playerBoard:e,compBoard:t,switchTurns:()=>{n.hasTurn?(n.hasTurn=!1,a.hasTurn=!0,setTimeout((()=>{a.attack()}),1e3)):n.hasTurn||(a.hasTurn=!1,n.hasTurn=!0)}}})();e.exports={Game:a}},325:(e,t,n)=>{const{Ship:r}=n(884);e.exports={Gameboard:()=>{let e=[],t=[],n=[];(()=>{for(let t=1;t<11;t++)for(let n=1;n<11;n++){let r={coord:`${t}:${n}`,hasShip:!1,occupiedBy:"",isHit:!1};e.push(r)}})();let o={spaces:e,missHits:n,deployedShips:t,fleetDrown:!1,placeShip:(n,o)=>{const a=r(o);if(t.find((e=>e.len===o)))return;const s=Number(n[n.length-1]),i=n[0];if(!(s+a.len-1>10)){for(let t=0;t<a.len;t++){const n=e.find((e=>e.coord===`${i}:${s+t}`));if(n.hasShip)throw"try again";n.hasShip=!0,n.occupiedBy=a.size}t.push(a)}},recieveAttack:r=>{let a=e.find((e=>e.coord===r));if(!a.isHit){if(a.isHit=!0,a.hasShip){let e=a.occupiedBy;(e=>{if(e.isSunk)return;let t=Math.max(e.hitSpots)+1;e.hit(t)})(t.find((t=>t.size===e)))}else n.push(r);3===t.filter((e=>e.isSunk)).length&&(o.fleetDrown=!0)}}};return o}}},62:e=>{e.exports={Player:e=>{let t=[];const n=()=>{let o=Math.floor(10*Math.random())+1,a=Math.floor(10*Math.random())+1,s=`${a}:${o}`;!e.spaces.map((e=>e.coord)).includes(s)||t.includes(s)?n():(document.getElementById(`${a}:${o}`).click(),r.hits.push(s))};let r={isComputer:!1,hasTurn:!1,hits:t,attack:n};return r}}},884:e=>{e.exports={Ship:e=>{let t;switch(e){case 3:t="small";break;case 5:t="medium";break;case 7:t="large"}const n={len:e,isSunk:!1,size:t,hitSpots:[],hit:e=>{n.isSunk||(n.hitSpots.push(e),n.hitSpots.length===n.len&&(n.isSunk=!0))}};return n}}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}(()=>{const{DOMloader:e}=n(475);e.loadNav(),e.loadMainContainer()})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL0RPTWxvYWRlci5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL0dhbWUuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9HYW1lYm9hcmQuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9QbGF5ZXIuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9TaGlwLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJHYW1lIiwiRE9NbG9hZGVyIiwibG9hZE5hdiIsIm5hdiIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJpbm5lckhUTUwiLCJuYXZUaXRsZSIsImNyZWF0ZUVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsInBsYXllciIsImhhc1R1cm4iLCJhcHBlbmRDaGlsZCIsImxvYWRDb250YWluZXIiLCJib2FyZCIsImlkIiwidGl0bGUiLCJjb250YWluZXIiLCJzZXRBdHRyaWJ1dGUiLCJib2FyZFR0aWxlIiwiYm9hcmRDb250YWluZXIiLCJzcGFjZXMiLCJmb3JFYWNoIiwic3BhY2UiLCJzcXVhcmUiLCJjb29yZCIsImNsYXNzTGlzdCIsImFkZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwicmVjaWV2ZUF0dGFjayIsInRhcmdldCIsInN0eWxlIiwiYmFja2dyb3VuZCIsInN3aXRjaFR1cm5zIiwicGxheWVyQm9hcmQiLCJmbGVldERyb3duIiwiY29tcEJvYXJkIiwiZ2FtZU92ZXIiLCJoYXNTaGlwIiwiZ2V0RWxlbWVudEJ5SWQiLCJtYWluQ29udGFpbmVyIiwianVzdGlmeUNvbnRlbnQiLCJhbGlnbkl0ZW1zIiwiZ2FtZU92ZXJNZXNzYWdlIiwiZm9udFNpemUiLCJsb2FkTWFpbkNvbnRhaW5lciIsIm1vZHVsZSIsImV4cG9ydHMiLCJQbGF5ZXIiLCJHYW1lYm9hcmQiLCJwbGFjZVJhbmRvbVNoaXAiLCJjb21wIiwibGVuIiwieEF4aXMiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJwbGFjZVNoaXAiLCJpc0NvbXB1dGVyIiwic2V0VGltZW91dCIsImF0dGFjayIsIlNoaXAiLCJkZXBsb3llZFNoaXBzIiwibWlzc0hpdHMiLCJpIiwiaiIsIm9jY3VwaWVkQnkiLCJpc0hpdCIsInB1c2giLCJjcmVhdGVTcGFjZXMiLCJvYmoiLCJzaGlwIiwiZmluZCIsIk51bWJlciIsImxlbmd0aCIsInlBeGlzIiwic2l6ZSIsImlzU3VuayIsInNwb3QiLCJtYXgiLCJoaXRTcG90cyIsImhpdCIsImF0dGFja1NoaXAiLCJmaWx0ZXIiLCJlbmVteUJvYXJkIiwiaGl0cyIsIm1hcCIsImluY2x1ZGVzIiwiY2xpY2siLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJfX3dlYnBhY2tfbW9kdWxlc19fIl0sIm1hcHBpbmdzIjoiMkJBQUEsTUFBTSxLQUFFQSxHQUFTLEVBQVEsS0FFbkJDLEVBQVksTUFFZCxNQUFNQyxFQUFVLEtBQ2IsTUFBTUMsRUFBTUMsU0FBU0MscUJBQXFCLE9BQU8sR0FDakRGLEVBQUlHLFVBQVksR0FDaEIsTUFBTUMsRUFBV0gsU0FBU0ksY0FBYyxNQUN4Q0QsRUFBU0UsYUFBaUJULEVBQUtVLE9BQU9DLFFBQVUsT0FBUyxTQUFsQyxRQUN2QlIsRUFBSVMsWUFBWUwsSUFJYk0sRUFBZ0IsQ0FBQ0MsRUFBT0MsRUFBSUMsS0FDOUIsTUFBTUMsRUFBWWIsU0FBU0ksY0FBYyxPQUN6Q1MsRUFBVUMsYUFBYSxLQUFNSCxHQUU3QixNQUFNSSxFQUFhZixTQUFTSSxjQUFjLE1BQzFDVyxFQUFXVixZQUFjTyxFQUV6QixNQUFNSSxFQUFpQmhCLFNBQVNJLGNBQWMsT0FDOUNZLEVBQWVGLGFBQWEsS0FBYyxtQkFBUEgsRUFBMEIsYUFBZSxl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VTdDLEVBQVFBLEVBQU9DLFFBQVMyQyxHQUcvQzVDLEVBQU9DLFEsTUNyQmYsTUFBTSxVQUFFL0MsR0FBYyxFQUFRLEtBRTlCQSxFQUFVQyxVQUNWRCxFQUFVNkMscUIiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgR2FtZSB9ID0gcmVxdWlyZSgnLi9HYW1lJyk7XG5cbmNvbnN0IERPTWxvYWRlciA9ICgoKSA9PiB7XG5cbiAgICBjb25zdCBsb2FkTmF2ID0gKCkgPT4ge1xuICAgICAgIGNvbnN0IG5hdiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCduYXYnKVswXTtcbiAgICAgICBuYXYuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgY29uc3QgbmF2VGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMScpO1xuICAgICAgIG5hdlRpdGxlLnRleHRDb250ZW50ID0gYCR7R2FtZS5wbGF5ZXIuaGFzVHVybiA/ICdZb3VyJyA6ICdFbmVteSd9IHR1cm5gO1xuICAgICAgIG5hdi5hcHBlbmRDaGlsZChuYXZUaXRsZSk7XG5cbiAgICB9XG5cbiAgICBjb25zdCBsb2FkQ29udGFpbmVyID0gKGJvYXJkLCBpZCwgdGl0bGUpID0+IHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2lkJywgaWQpO1xuXG4gICAgICAgIGNvbnN0IGJvYXJkVHRpbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMScpO1xuICAgICAgICBib2FyZFR0aWxlLnRleHRDb250ZW50ID0gdGl0bGU7XG5cbiAgICAgICAgY29uc3QgYm9hcmRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgYm9hcmRDb250YWluZXIuc2V0QXR0cmlidXRlKCdpZCcsICBpZCA9PT0gJ2xlZnQtY29udGFpbmVyJyA/ICdsZWZ0LWJvYXJkJyA6ICdyaWdodC1ib2FyZCcpO1xuXG4gICAgICAgIGJvYXJkLnNwYWNlcy5mb3JFYWNoKHNwYWNlID0+IHtcbiAgICAgICAgICAgIGxldCBzcXVhcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIHNxdWFyZS5zZXRBdHRyaWJ1dGUoJ2lkJywgYCR7c3BhY2UuY29vcmR9YCk7XG4gICAgICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZCgnc3BhY2VzJyk7XG4gICAgICAgICAgICBzcXVhcmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGJvYXJkLnJlY2lldmVBdHRhY2soZS50YXJnZXQuaWQpO1xuICAgICAgICAgICAgICAgIHNxdWFyZS5zdHlsZS5iYWNrZ3JvdW5kID0gJ3JlZCc7XG4gICAgICAgICAgICAgICAgR2FtZS5zd2l0Y2hUdXJucygpO1xuICAgICAgICAgICAgICAgIGxvYWROYXYoKTtcbiAgICAgICAgICAgICAgICBpZiAoR2FtZS5wbGF5ZXJCb2FyZC5mbGVldERyb3duIHx8IEdhbWUuY29tcEJvYXJkLmZsZWV0RHJvd24pIHtcbiAgICAgICAgICAgICAgICAgICAgZ2FtZU92ZXIoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBpZihzcGFjZS5oYXNTaGlwICYmIGJvYXJkID09PSBHYW1lLnBsYXllckJvYXJkKSB7XG4gICAgICAgICAgICAgICAgc3F1YXJlLnN0eWxlLmJhY2tncm91bmQgPSAnYmx1ZSc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJvYXJkQ29udGFpbmVyLmFwcGVuZENoaWxkKHNxdWFyZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChib2FyZFR0aWxlKTtcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGJvYXJkQ29udGFpbmVyKTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW4tY29udGFpbmVyJykuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcbiAgICB9XG5cbiAgICBjb25zdCBsb2FkTWFpbkNvbnRhaW5lciA9ICgpID0+IHtcbiAgICAgICBjb25zdCBtYWluQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW4tY29udGFpbmVyJyk7XG5cbiAgICAgICAgbG9hZENvbnRhaW5lcihHYW1lLnBsYXllckJvYXJkLCAnbGVmdC1jb250YWluZXInLCAnWW91ciBib2FyZCcpO1xuXG4gICAgICAgIGxvYWRDb250YWluZXIoR2FtZS5jb21wQm9hcmQsICdyaWdodC1jb250YWluZXInLCBcIkVuZW15J3MgYm9hcmRcIik7XG4gICAgfVxuXG4gICAgY29uc3QgZ2FtZU92ZXIgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG1haW5Db250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbi1jb250YWluZXInKTtcbiAgICAgICAgbWFpbkNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcblxuICAgICAgICBtYWluQ29udGFpbmVyLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ2NlbnRlcic7XG4gICAgICAgIG1haW5Db250YWluZXIuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xuXG4gICAgICAgIGNvbnN0IGdhbWVPdmVyTWVzc2FnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJyk7XG4gICAgICAgIGdhbWVPdmVyTWVzc2FnZS5zdHlsZS5mb250U2l6ZSA9ICc1MHB4JztcbiAgICAgICAgZ2FtZU92ZXJNZXNzYWdlLnRleHRDb250ZW50ID0gYEdhbWUgT3ZlciEgJHtHYW1lLmNvbXBCb2FyZC5mbGVldERyb3duID8gJ1lvdScgOiAnWW91ciBlbmVteSBoYXMgJ30gd29uIWA7XG5cbiAgICAgICAgbWFpbkNvbnRhaW5lci5hcHBlbmRDaGlsZChnYW1lT3Zlck1lc3NhZ2UpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGxvYWROYXYsXG4gICAgICAgIGxvYWRNYWluQ29udGFpbmVyXG4gICAgfVxuXG59KSgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBET01sb2FkZXIsXG59IiwiY29uc3QgeyBQbGF5ZXIgfSA9IHJlcXVpcmUoJy4vUGxheWVyJyk7XG5jb25zdCB7IEdhbWVib2FyZCB9ID0gcmVxdWlyZSgnLi9HYW1lYm9hcmQnKTtcblxuY29uc3QgR2FtZSA9ICgoKSA9PiB7XG4gICAgY29uc3QgcGxheWVyQm9hcmQgPSBHYW1lYm9hcmQoKTtcbiAgICBjb25zdCBjb21wQm9hcmQgPSBHYW1lYm9hcmQoKTtcblxuICAgIHBsYWNlUmFuZG9tU2hpcChwbGF5ZXJCb2FyZCwgMyk7XG4gICAgcGxhY2VSYW5kb21TaGlwKHBsYXllckJvYXJkLCA1KTtcbiAgICBwbGFjZVJhbmRvbVNoaXAocGxheWVyQm9hcmQsIDcpO1xuXG4gICAgIHBsYWNlUmFuZG9tU2hpcChjb21wQm9hcmQsIDMpO1xuICAgICBwbGFjZVJhbmRvbVNoaXAoY29tcEJvYXJkLCA1KTtcbiAgICAgcGxhY2VSYW5kb21TaGlwKGNvbXBCb2FyZCwgNyk7XG5cblxuICAgIGNvbnN0IHBsYXllciA9IFBsYXllcihjb21wQm9hcmQpOyAgXG4gICAgY29uc3QgY29tcCA9IFBsYXllcihwbGF5ZXJCb2FyZCk7XG5cbiAgICBjb21wLmlzQ29tcHV0ZXIgPSB0cnVlO1xuXG4gICAgcGxheWVyLmhhc1R1cm4gPSB0cnVlO1xuXG5cbiAgICBjb25zdCBzd2l0Y2hUdXJucyA9ICgpID0+IHtcbiAgICAgICAgaWYgKHBsYXllci5oYXNUdXJuKSB7XG4gICAgICAgICAgICBwbGF5ZXIuaGFzVHVybiA9IGZhbHNlO1xuICAgICAgICAgICAgY29tcC5oYXNUdXJuID0gdHJ1ZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29tcC5hdHRhY2soKTtcbiAgICAgICAgICAgIH0sIDEwMDApO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoIXBsYXllci5oYXNUdXJuKSB7XG4gICAgICAgICAgICBjb21wLmhhc1R1cm4gPSBmYWxzZTtcbiAgICAgICAgICAgIHBsYXllci5oYXNUdXJuID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBsYWNlUmFuZG9tU2hpcCAoYm9hcmQsIGxlbikge1xuICAgICAgICBsZXQgeEF4aXMgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCkgKyAxO1xuICAgICAgICBsZXQgeUF4aXMgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCkgKyAxO1xuICAgICAgICBsZXQgY29vcmQgPSBgJHt5QXhpc306JHt4QXhpc31gO1xuXG4gICAgICAgIGlmKHhBeGlzICsgbGVuID4gMTApIHtcbiAgICAgICAgICAgIHBsYWNlUmFuZG9tU2hpcChib2FyZCwgbGVuKTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYm9hcmQucGxhY2VTaGlwKGNvb3JkLCBsZW4pO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBwbGFjZVJhbmRvbVNoaXAoYm9hcmQsIGxlbik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gIHtcbiAgICAgICAgcGxheWVyLFxuICAgICAgICBjb21wLFxuICAgICAgICBwbGF5ZXJCb2FyZCxcbiAgICAgICAgY29tcEJvYXJkLFxuICAgICAgICBzd2l0Y2hUdXJucyxcbiAgICB9XG59KSgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBHYW1lLFxufSIsImNvbnN0IHsgU2hpcCB9ID0gcmVxdWlyZSgnLi9TaGlwJyk7XG5cbmNvbnN0IEdhbWVib2FyZCA9ICgpID0+IHtcbiAgICBsZXQgc3BhY2VzID0gW107XG4gICAgbGV0IGRlcGxveWVkU2hpcHMgPSBbXTtcbiAgICBsZXQgbWlzc0hpdHMgPSBbXTtcbiAgICBsZXQgZmxlZXREcm93biA9IGZhbHNlO1xuXG4gICAgY29uc3QgY3JlYXRlU3BhY2VzID0gKCkgPT4ge1xuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IDExOyBpICsrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMTsgaiA8IDExOyBqKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgc3BhY2UgPSB7XG4gICAgICAgICAgICAgICAgICAgIGNvb3JkOiBgJHtpfToke2p9YCxcbiAgICAgICAgICAgICAgICAgICAgaGFzU2hpcDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG9jY3VwaWVkQnk6ICcnLFxuICAgICAgICAgICAgICAgICAgICBpc0hpdDogZmFsc2VcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBzcGFjZXMucHVzaChzcGFjZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBwbGFjZVNoaXAgPSAoY29vcmQsIGxlbikgPT4ge1xuICAgICAgICBjb25zdCBzaGlwID0gU2hpcChsZW4pXG4gICAgICAgIC8vY2hlY2sgc2hpcCBhdmFpbGFiaWxpdHlcbiAgICAgICAgaWYoZGVwbG95ZWRTaGlwcy5maW5kKCBzaGlwID0+IHNoaXAubGVuID09PSBsZW4pKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeEF4aXMgPSBOdW1iZXIoY29vcmRbY29vcmQubGVuZ3RoIC0gMV0pO1xuICAgICAgICBjb25zdCB5QXhpcyA9IGNvb3JkWzBdO1xuXG4gICAgICAgIGlmICgoeEF4aXMgKyBzaGlwLmxlbiAtIDEpID4gMTApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcC5sZW47IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgc3BhY2UgPSBzcGFjZXMuZmluZChzcGFjZSA9PiBzcGFjZS5jb29yZCA9PT0gYCR7eUF4aXN9OiR7eEF4aXMgKyBpfWApO1xuXG4gICAgICAgICAgICBpZiAoc3BhY2UuaGFzU2hpcCkge1xuICAgICAgICAgICAgICAgIHRocm93ICd0cnkgYWdhaW4nO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzcGFjZS5oYXNTaGlwID0gdHJ1ZTtcbiAgICAgICAgICAgIHNwYWNlLm9jY3VwaWVkQnkgPSBzaGlwLnNpemU7XG4gICAgICAgIH1cblxuICAgICAgICBkZXBsb3llZFNoaXBzLnB1c2goc2hpcClcbiAgICB9XG5cbiAgICBjb25zdCBjaGVja0ZsZWV0ID0oKSA9PiB7XG4gICAgICAgIGxldCBzdW5rZW5TaGlwcyA9IGRlcGxveWVkU2hpcHMuZmlsdGVyKHNoaXAgPT4gc2hpcC5pc1N1bmspO1xuICAgICAgICBcbiAgICAgICAgaWYgKHN1bmtlblNoaXBzLmxlbmd0aCA9PT0gMykge1xuICAgICAgICAgICAgb2JqLmZsZWV0RHJvd24gPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgYXR0YWNrU2hpcCA9IChzaGlwKSA9PiB7XG4gICAgICAgIGlmIChzaGlwLmlzU3Vuaykge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgbGV0IHNwb3QgPSBNYXRoLm1heChzaGlwLmhpdFNwb3RzKSArIDFcbiAgICAgICAgc2hpcC5oaXQoc3BvdClcbiAgICB9XG5cbiAgICBjb25zdCByZWNpZXZlQXR0YWNrID0gKGNvb3JkKSA9PiB7XG4gICAgICAgIGxldCBzcGFjZSA9IHNwYWNlcy5maW5kKHNwYWNlID0+IHNwYWNlLmNvb3JkID09PSBjb29yZCk7XG4gICAgICAgIGlmKHNwYWNlLmlzSGl0KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc3BhY2UuaXNIaXQgPSB0cnVlO1xuXG4gICAgICAgIGlmIChzcGFjZS5oYXNTaGlwKSB7XG4gICAgICAgICAgICBsZXQgc2l6ZSA9IHNwYWNlLm9jY3VwaWVkQnlcbiAgICAgICAgICAgIGxldCBzaGlwID0gZGVwbG95ZWRTaGlwcy5maW5kKHNoaXAgPT4gc2hpcC5zaXplID09PSBzaXplKVxuICAgICAgICAgICAgYXR0YWNrU2hpcChzaGlwKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWlzc0hpdHMucHVzaChjb29yZClcbiAgICAgICAgfVxuICAgICAgICBjaGVja0ZsZWV0KCk7XG4gICAgfVxuXG4gICAgY3JlYXRlU3BhY2VzKCk7XG5cbiAgICBsZXQgb2JqID0ge1xuICAgICAgICBzcGFjZXMsXG4gICAgICAgIG1pc3NIaXRzLFxuICAgICAgICBkZXBsb3llZFNoaXBzLFxuICAgICAgICBmbGVldERyb3duLFxuICAgICAgICBwbGFjZVNoaXAsXG4gICAgICAgIHJlY2lldmVBdHRhY2tcbiAgICB9XG5cbiAgICByZXR1cm4gb2JqO1xufVxuXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIEdhbWVib2FyZCxcbn0iLCJjb25zdCBQbGF5ZXIgPSAoZW5lbXlCb2FyZCkgPT4ge1xuICAgIGxldCBpc0NvbXB1dGVyID0gZmFsc2U7XG4gICAgbGV0IGhhc1R1cm4gPSBmYWxzZTtcbiAgICBsZXQgaGl0cyA9IFtdO1xuXG4gICAgY29uc3QgYXR0YWNrID0gKCkgPT4ge1xuICAgICAgICBsZXQgeEF4aXMgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCkgKyAxO1xuICAgICAgICBsZXQgeUF4aXMgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCkgKyAxO1xuICAgICAgICBsZXQgY29vcmQgPSBgJHt5QXhpc306JHt4QXhpc31gXG5cbiAgICAgICAgaWYoIWVuZW15Qm9hcmQuc3BhY2VzLm1hcChzcGFjZSA9PiBzcGFjZS5jb29yZCkuaW5jbHVkZXMoY29vcmQpIHx8IGhpdHMuaW5jbHVkZXMoY29vcmQpKSB7XG4gICAgICAgICAgICBhdHRhY2soKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBzcXVhcmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHt5QXhpc306JHt4QXhpc31gKVxuICAgICAgICAgICAgc3F1YXJlLmNsaWNrKCk7XG4gICAgICAgICAgICBvYmouaGl0cy5wdXNoKGNvb3JkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGxldCBvYmogPSB7XG4gICAgICAgIGlzQ29tcHV0ZXIsXG4gICAgICAgIGhhc1R1cm4sXG4gICAgICAgIGhpdHMsXG4gICAgICAgIGF0dGFja1xuICAgIH1cblxuICAgIHJldHVybiBvYmo7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIFBsYXllcixcbn0iLCJjb25zdCBTaGlwID0gKGxlbikgPT4ge1xuICAgIGxldCBoaXRTcG90cyA9IFtdO1xuICAgIGxldCBpc1N1bmsgPSBmYWxzZTtcbiAgICBsZXQgc2l6ZTtcblxuICAgIGNvbnN0IGhpdCA9IChzcG90KSA9PiB7XG4gICAgICAgIGlmIChvYmouaXNTdW5rKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIG9iai5oaXRTcG90cy5wdXNoKHNwb3QpXG4gICAgICAgIGlmIChvYmouaGl0U3BvdHMubGVuZ3RoID09PSBvYmoubGVuKSB7XG4gICAgICAgICAgICBvYmouaXNTdW5rID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBzd2l0Y2gobGVuKSB7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIHNpemUgPSAnc21hbGwnO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgIHNpemUgPSAnbWVkaXVtJztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICBzaXplID0gJ2xhcmdlJztcbiAgICAgICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgY29uc3Qgb2JqID0gIHtcbiAgICAgICAgbGVuLFxuICAgICAgICBpc1N1bmssXG4gICAgICAgIHNpemUsXG4gICAgICAgIGhpdFNwb3RzLFxuICAgICAgICBoaXQsXG4gICAgfVxuXG4gICAgcmV0dXJuIG9iajtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgU2hpcCxcbn07XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiY29uc3QgeyBET01sb2FkZXIgfSA9IHJlcXVpcmUoJy4vRE9NbG9hZGVyJyk7XG5cbkRPTWxvYWRlci5sb2FkTmF2KCk7XG5ET01sb2FkZXIubG9hZE1haW5Db250YWluZXIoKTtcblxuXG4iXSwic291cmNlUm9vdCI6IiJ9